# ðŸ‘¥ Role-Based Access Control

> Permissions à¹à¸¥à¸° User Roles Matrix â€” à¸•à¸£à¸‡à¸à¸±à¸šà¹‚à¸„à¹‰à¸”à¸ˆà¸£à¸´à¸‡ (Updated: 2026-02-19)

---

## ðŸ‘¤ User Roles

| Role           | Description             | Dashboard Route |
| -------------- | ----------------------- | --------------- |
| ðŸ‘¨â€ðŸŽ“ **STUDENT** | à¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²à¸—à¸µà¹ˆà¸—à¸³à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™    | `(student)/`    |
| ðŸ‘¨â€ðŸ« **ADVISOR** | à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™ | `(advisor)/`    |
| ðŸ‘¨â€ðŸ’¼ **ADMIN**   | à¸œà¸¹à¹‰à¸”à¸¹à¹à¸¥à¸£à¸°à¸šà¸š             | `(admin)/`      |

---

## ðŸ” Permissions Matrix (à¸•à¸²à¸¡à¹‚à¸„à¹‰à¸”à¸ˆà¸£à¸´à¸‡)

| Feature                          | ðŸ‘¨â€ðŸŽ“ Student | ðŸ‘¨â€ðŸ« Advisor | ðŸ‘¨â€ðŸ’¼ Admin |
| -------------------------------- | :--------: | :--------: | :------: |
| **à¸”à¸¹à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¸•à¸™à¹€à¸­à¸‡**               |     âœ…     |     âœ…     |    âœ…    |
| **à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸µà¸¡**                     |     âœ…     |     âŒ     |    âŒ    |
| **à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸—à¸µà¸¡**                  |     âœ…     |     âŒ     |    âŒ    |
| **à¸ªà¸£à¹‰à¸²à¸‡/à¹à¸à¹‰à¹„à¸‚ Project**          |     âœ…     |     âŒ     |    âŒ    |
| **à¸¥à¸š Project (à¸à¹ˆà¸­à¸™ approve)**    |     âœ…     |     âŒ     |    âŒ    |
| **à¹€à¸¥à¸·à¸­à¸à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²**        |     âœ…     |     âŒ     |    âŒ    |
| **à¸ªà¸£à¹‰à¸²à¸‡/à¹à¸à¹‰à¹„à¸‚ Task**             |     âœ…     |     âŒ     |    âŒ    |
| **à¸ªà¹ˆà¸‡à¸‡à¸²à¸™ (Submission)**          |     âœ…Â¹    |     âŒ     |    âœ…Â¹   |
| **à¹ƒà¸«à¹‰ Comment**                  |     âœ…     |     âœ…     |    âŒ    |
| **à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™**        |     âŒ     |     âœ…Â²    |    âŒ    |
| **à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¸‡à¸²à¸™ (Submission)**|    âŒ     |     âœ…     |    âœ…    |
| **à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™ (Grades)**            |     âŒ     |     âŒ     |    âœ…    |
| **à¸”à¸¹à¹€à¸à¸£à¸”à¸•à¸²à¸¡ section**            |     âŒ     |     âŒ     |    âœ…    |
| **à¸”à¸¹à¹€à¸à¸£à¸”à¸•à¸™à¹€à¸­à¸‡**                  |     âœ…     |     âŒ     |    âŒ    |
| **à¸ˆà¸±à¸”à¸à¸²à¸£ Section**               |     âŒ     |     âŒ     |    âœ…    |
| **à¸ˆà¸±à¸”à¸à¸²à¸£ Event**                 |     âŒ     |     âŒ     |    âœ…    |
| **à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰**                  |     âŒ     |     âŒ     |    âœ…    |
| **à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¸¡ (Admin)**             |     âŒ     |     âŒ     |    âœ…    |
| **à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´à¸ à¸²à¸žà¸£à¸§à¸¡**                |     âŒ     |     âœ…     |    âœ…    |

> Â¹ à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¹„à¸”à¹‰à¹€à¸‰à¸žà¸²à¸°à¸ªà¸¡à¸²à¸Šà¸´à¸à¹ƒà¸™à¸—à¸µà¸¡ à¸«à¸£à¸·à¸­ Admin
> Â² à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¹€à¸‰à¸žà¸²à¸°à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²à¸‚à¸­à¸‡à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¸™à¸±à¹‰à¸™

---

## ðŸ“ Dashboard Routes

### Student Dashboard (`(student)/`)

| Route       | Feature      |
| ----------- | ------------ |
| `/Teams`    | à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¸¡    |
| `/tasks`    | Kanban Board |
| `/Timeline` | à¸”à¸¹ Timeline  |
| `/Search`   | à¸„à¹‰à¸™à¸«à¸²à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™ |
| `/settings` | à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²      |

### Advisor Dashboard (`(advisor)/`)

| Route            | Feature        |
| ---------------- | -------------- |
| `/advisorteams`  | à¸”à¸¹à¸—à¸µà¸¡à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸² |
| `/advisor-tasks` | à¸”à¸¹ Tasks       |
| `/Timeline`      | à¸”à¸¹ Timeline    |
| `/settings`      | à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²        |

### Admin Dashboard (`(admin)/`)

| Route       | Feature         |
| ----------- | --------------- |
| `/sections` | à¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¸¡à¸¹à¹ˆà¹€à¸£à¸µà¸¢à¸™ |
| `/users`    | à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰    |
| `/teams`    | à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¸¡       |
| `/settings` | à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸£à¸°à¸šà¸š     |

---

## ðŸ›¡ï¸ Route Protection (NestJS)

### JWT Guard

```typescript
// à¸—à¸¸à¸ protected endpoint à¸•à¹‰à¸­à¸‡à¸¡à¸µ Guard
@UseGuards(JwtAuthGuard)
@Get('my-team')
async getMyTeam(@CurrentUser() user: JwtPayload) {
  return this.teamsService.getMyTeam(user.users_id);
}
```

### Role Guard

```typescript
// Admin-only endpoints (à¹€à¸Šà¹ˆà¸™ à¹ƒà¸«à¹‰à¹€à¸à¸£à¸”, à¸ˆà¸±à¸”à¸à¸²à¸£ Event)
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles('ADMIN')
@Post()
async batchSaveGrades(@Body() dto: BatchGradesDto) {
  return this.gradesService.batchSave(dto);
}
```

### Advisor Guard

```typescript
// Advisor-only endpoints (à¹€à¸Šà¹ˆà¸™ à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™)
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles('ADVISOR')
@Put(':id/status')
async updateProjectStatus(
  @Param('id') id: string,
  @Body() dto: UpdateStatusDto,
  @CurrentUser() user: JwtPayload,
) {
  return this.projectsService.updateStatus(+id, dto, user);
}
```

### Multi-Role Guard

```typescript
// ADVISOR or ADMIN (à¹€à¸Šà¹ˆà¸™ à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜ Submission)
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles('ADVISOR', 'ADMIN')
@Patch(':id/approve')
async approveSubmission(@Param('id') id: string) {
  return this.submissionsService.approve(+id);
}
```

---

## âš ï¸ à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¸ªà¸³à¸„à¸±à¸ (à¸ˆà¸²à¸à¹‚à¸„à¹‰à¸”à¸ˆà¸£à¸´à¸‡)

1. **Grades à¹€à¸›à¹‡à¸™ Admin only** â€” à¸—à¸±à¹‰à¸‡ GET (by section), POST (batch save), PATCH, DELETE à¸•à¹‰à¸­à¸‡ Admin à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™
2. **Project Status** â€” à¹€à¸‰à¸žà¸²à¸° Advisor à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²à¸‚à¸­à¸‡à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¸™à¸±à¹‰à¸™à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™à¸—à¸µà¹ˆà¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¹„à¸”à¹‰ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ Admin)
3. **Submission Submit** â€” à¸ªà¸¡à¸²à¸Šà¸´à¸à¸—à¸µà¸¡ à¸«à¸£à¸·à¸­ Admin (à¹„à¸¡à¹ˆà¸ˆà¸³à¸à¸±à¸”à¹€à¸‰à¸žà¸²à¸° Student)
4. **Terms POST** â€” âœ… à¸¡à¸µ JwtAuthGuard + RolesGuard('ADMIN') à¹à¸¥à¹‰à¸§ (à¹à¸à¹‰à¹ƒà¸™ NestJS migration)
5. **Users Search** â€” âœ… à¸¡à¸µ class-level JwtAuthGuard à¹à¸¥à¹‰à¸§ (à¹à¸à¹‰à¹ƒà¸™ NestJS migration)
6. **Profile PATCH** â€” âœ… migrate à¹€à¸›à¹‡à¸™ JWT à¹à¸¥à¹‰à¸§ (à¹ƒà¸Šà¹‰ JwtAuthGuard)
7. **Sections GET** â€” âœ… à¸¡à¸µ JwtAuthGuard à¹à¸¥à¹‰à¸§ (à¹à¸à¹‰à¹ƒà¸™ NestJS migration)

---

## ðŸ‘¨â€ðŸŽ“ Student Features

- à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¸°à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¸¡
- à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡/à¸­à¸­à¸à¸ˆà¸²à¸à¸—à¸µà¸¡
- à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¸°à¹à¸à¹‰à¹„à¸‚à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™ (à¸à¹ˆà¸­à¸™à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)
- à¹€à¸¥à¸·à¸­à¸à¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²
- à¸¥à¸šà¸­à¸²à¸ˆà¸²à¸£à¸¢à¹Œà¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸² (à¸à¹ˆà¸­à¸™à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´)
- à¸ˆà¸±à¸”à¸à¸²à¸£ Task (à¸ªà¸£à¹‰à¸²à¸‡, à¹à¸à¹‰à¹„à¸‚, à¸¥à¸š, à¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢)
- à¸ªà¹ˆà¸‡à¸‡à¸²à¸™ (Submission) â€” à¹ƒà¸™à¸à¸²à¸™à¸°à¸ªà¸¡à¸²à¸Šà¸´à¸à¸—à¸µà¸¡
- à¸”à¸¹ Timeline à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸„à¸·à¸šà¸«à¸™à¹‰à¸²
- à¸„à¹‰à¸™à¸«à¸²à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡
- à¸”à¸¹à¹€à¸à¸£à¸”à¸•à¸™à¹€à¸­à¸‡

## ðŸ‘¨â€ðŸ« Advisor Features

- à¸”à¸¹à¸—à¸µà¸¡à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²
- à¹ƒà¸«à¹‰ Comment à¹à¸¥à¸°à¸„à¸³à¹à¸™à¸°à¸™à¸³
- à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™ (à¹€à¸‰à¸žà¸²à¸°à¹‚à¸„à¸£à¸‡à¸‡à¸²à¸™à¸—à¸µà¹ˆà¹€à¸›à¹‡à¸™à¸—à¸µà¹ˆà¸›à¸£à¸¶à¸à¸©à¸²)
- à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸ªà¹ˆà¸‡ (Submissions)
- à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´à¸ à¸²à¸žà¸£à¸§à¸¡

## ðŸ‘¨â€ðŸ’¼ Admin Features

- à¸ˆà¸±à¸”à¸à¸²à¸£ Section (CRUD + à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™)
- à¸ˆà¸±à¸”à¸à¸²à¸£ Event (à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸ªà¹ˆà¸‡à¸‡à¸²à¸™ â€” CRUD + à¸ªà¸£à¹‰à¸²à¸‡ Submission à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´)
- **à¹ƒà¸«à¹‰à¸„à¸°à¹à¸™à¸™ (Grades) â€” Batch save, à¹à¸à¹‰à¹„à¸‚, à¸¥à¸š**
- à¸”à¸¹à¹€à¸à¸£à¸”à¸•à¸²à¸¡ Section
- à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´/à¸›à¸à¸´à¹€à¸ªà¸˜à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸ªà¹ˆà¸‡ (Submissions)
- à¸ªà¹ˆà¸‡à¸‡à¸²à¸™à¹à¸—à¸™à¸—à¸µà¸¡ (Submissions submit)
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸—à¸µà¸¡ (à¹€à¸žà¸´à¹ˆà¸¡/à¸¥à¸šà¸ªà¸¡à¸²à¸Šà¸´à¸, à¸¥à¸šà¸—à¸µà¸¡)
- à¸”à¸¹à¸ªà¸–à¸´à¸•à¸´à¹à¸¥à¸°à¸£à¸²à¸¢à¸‡à¸²à¸™

---

> **Last Updated:** 2026-02-19
